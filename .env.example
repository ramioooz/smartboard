# =============================================================================
# Smartboard — Environment Variables
# Copy to .env and fill in values. Never commit .env.
# =============================================================================

# ── Node ──────────────────────────────────────────────────────────────────────
NODE_ENV=development
LOG_LEVEL=info

# ── Postgres ──────────────────────────────────────────────────────────────────
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
POSTGRES_USER=smartboard
POSTGRES_PASSWORD=smartboard_dev
POSTGRES_DB=smartboard

# Per-service DATABASE_URLs (each uses its own schema)
DATABASE_URL_AUTH=postgresql://smartboard:smartboard_dev@localhost:5433/smartboard?schema=auth
DATABASE_URL_TENANTS=postgresql://smartboard:smartboard_dev@localhost:5433/smartboard?schema=tenants
DATABASE_URL_DATASETS=postgresql://smartboard:smartboard_dev@localhost:5433/smartboard?schema=datasets
DATABASE_URL_ANALYTICS=postgresql://smartboard:smartboard_dev@localhost:5433/smartboard?schema=analytics
DATABASE_URL_DASHBOARDS=postgresql://smartboard:smartboard_dev@localhost:5433/smartboard?schema=dashboards

# ── Redis ─────────────────────────────────────────────────────────────────────
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_dev
REDIS_URL=redis://:redis_dev@localhost:6379

# ── MinIO / S3 ────────────────────────────────────────────────────────────────
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_USE_SSL=false
MINIO_ROOT_USER=smartboard_minio
MINIO_ROOT_PASSWORD=minio_dev_secret
MINIO_BUCKET_DATASETS=smartboard-datasets

# ── Auth / Session ────────────────────────────────────────────────────────────
# ⚠️  Generate real secrets for production: openssl rand -hex 32
SESSION_SECRET=change-me-in-production-at-least-32-chars
JWT_SECRET=change-me-in-production-at-least-32-chars
JWT_EXPIRES_IN=15m
REFRESH_TOKEN_EXPIRES_IN=7d

# ── Microsoft OIDC (Entra ID) ─────────────────────────────────────────────────
# Scaffold values — replace with real values from Azure App Registration
MICROSOFT_CLIENT_ID=your-client-id
MICROSOFT_CLIENT_SECRET=your-client-secret
MICROSOFT_TENANT_ID=your-tenant-id
MICROSOFT_REDIRECT_URI=http://localhost:4000/auth/microsoft/callback

# ── Dev Bypass (NEVER enable in production) ───────────────────────────────────
DEV_BYPASS_AUTH=false
DEV_DEFAULT_EMAIL=dev@local
DEV_DEFAULT_TENANT=Dev Workspace

# ── Service Ports ─────────────────────────────────────────────────────────────
WEB_PORT=3000
GATEWAY_PORT=4000
SVC_AUTH_PORT=4010
SVC_TENANTS_PORT=4020
SVC_DATASETS_PORT=4030
SVC_ANALYTICS_PORT=4040
SVC_DASHBOARDS_PORT=4050
SVC_REALTIME_PORT=4060
WORKER_PORT=4070

# ── Service Discovery (Gateway → Internal Services) ───────────────────────────
# Local: docker compose DNS names (matches service keys in infra/compose.yaml)
# AWS: Cloud Map service discovery endpoints
AUTH_SERVICE_URL=http://svc-auth:4010
TENANTS_SERVICE_URL=http://svc-tenants:4020
DATASETS_SERVICE_URL=http://svc-datasets:4030
ANALYTICS_SERVICE_URL=http://svc-analytics:4040
DASHBOARDS_SERVICE_URL=http://svc-dashboards:4050
REALTIME_SERVICE_URL=http://svc-realtime:4060

# ── OpenTelemetry ─────────────────────────────────────────────────────────────
OTEL_EXPORTER=console   # console | otlp
OTEL_ENDPOINT=http://localhost:4318
